(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cc8399da"],{"26d3":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",{attrs:{row:"","fill-height":"","justify-center":""}},[t.settingsLoading?s("progress-circular"):s("v-flex",{attrs:{xs12:""}},[s("alert-message",{attrs:{types:t.alertTypes}}),s("v-card",[t.settings.email||t.settings.phone?t._e():s("v-card-title",[s("h4",[t._v("Внимание!")]),s("span",{staticClass:"d-block"},[t._v("\n          У вас ни телефон ни электронная почта не привязаны к аккаунту. Вы потеряете доступ к аккаунту.\n          Крайне рекомендуем привязать либо телефон, либо электронную почту, если вы хотите сохранить доступ к аккаунту.\n        ")])]),s("v-card-text",{staticClass:"pb-0"},[s("v-form",[s("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"mt-2",attrs:{"error-messages":t.errors.collect("oldPassword"),"append-icon":t.showOldPassword?"mdi-lock-open-outline":"mdi-lock-outline",type:t.showOldPassword?"text":"password",name:"oldPassword",label:"Старый пароль"},on:{"click:append":function(e){t.showOldPassword=!t.showOldPassword}},model:{value:t.savePasswordForm.oldPassword,callback:function(e){t.$set(t.savePasswordForm,"oldPassword",e)},expression:"savePasswordForm.oldPassword"}}),t._isError(t.HttpStatus.BAD_REQUEST)?s("div",{staticClass:"error--text word-break-word"},[t._v("\n            Старый пароль введен неверно. "),s("router-link",{staticClass:"bib-a",attrs:{to:"/restore"}},[t._v("Забыли пароль?\n          ")])],1):t._e(),s("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6",expression:"'required|min:6'"}],staticClass:"mt-2",attrs:{"error-messages":t.errors.collect("newPassword"),"append-icon":t.showNewPassword?"mdi-lock-open-outline":"mdi-lock-outline",type:t.showNewPassword?"text":"password",name:"newPassword",label:"Новый пароль"},on:{"click:append":function(e){t.showNewPassword=!t.showNewPassword}},model:{value:t.savePasswordForm.newPassword,callback:function(e){t.$set(t.savePasswordForm,"newPassword",e)},expression:"savePasswordForm.newPassword"}})],1)],1),s("v-card-actions",{staticClass:"pt-0",staticStyle:{"justify-content":"center"}},[s("v-btn",{staticClass:"white--text",attrs:{color:"blue darken-3",loading:t._isRequest(t.Request.SAVE_PASSWORD),disabled:t._isRequest(t.Request.SAVE_PASSWORD)},on:{click:t.savePassword}},[t._v("\n          Сохранить\n        ")])],1),s("v-divider"),s("v-card-text",{staticStyle:{display:"flex","justify-content":"space-between"}},[s("span",[t._v("Почта")]),s("span",[t._v(t._s(t.settings.email))]),s("router-link",{staticClass:"bib-a",attrs:{to:"/settings/email"}},[t._v("Изменить")])],1),s("v-divider"),s("v-card-text",{staticStyle:{display:"flex","justify-content":"space-between"}},[s("span",[t._v("Телефон")]),s("span",[t._v(t._s(t.settings.phone))]),s("router-link",{staticClass:"bib-a",attrs:{to:"/settings/phone"}},[t._v("Изменить")])],1)],1)],1)],1)},r=[],n=(s("06db"),s("cc57")),i=s("8022"),o=s("5f38"),c=s("dcdb"),l=s("c7da"),d=s("db49"),u=s("29c5"),v=s("2c57"),f={name:"Settings",mixins:[n["a"],i["a"],v["a"]],components:{ProgressCircular:u["a"],AlertMessage:c["a"]},data:function(){return{settingsLoading:!0,showOldPassword:!1,showNewPassword:!1,alertTypes:["alert-success"],settings:{phone:"",email:""},savePasswordForm:{oldPassword:"",newPassword:""}}},created:function(){this.$validator.localize("ru",{custom:{oldPassword:{required:function(){return"Введите старый пароль"}},newPassword:{required:function(){return"Введите новый пароль"},min:function(){return"Пароль слишком короткий. Используйте хотя бы 6 символов."}}}}),this.loadSettings()},methods:{pullToRefresh:function(t){t("done"),this.settingsLoading=!0,this.loadSettings()},loadSettings:function(){var t=this;o["a"].getGeneralSettings().then(function(e){t.settings=e.data}).finally(function(){t.settingsLoading=!1})},resetSavePasswordForm:function(){this.savePasswordForm.oldPassword="",this.savePasswordForm.newPassword="",this.$validator.reset()},savePassword:function(){var t=this;this.$validator.validateAll().then(function(e){e&&(t.setRequest(d["m"].SAVE_PASSWORD),o["a"].savePassword(t.savePasswordForm).then(function(){t.resetSavePasswordForm(),t.setAlertSuccess(l["i"])},function(e){e.response.status===t.HttpStatus.BAD_REQUEST&&t.setAlertError(e)}).finally(function(){t.clearRequest()}))})}},watch:{"savePasswordForm.oldPassword":function(){"alert-danger"===this.alertType&&this.clearAlert()}}},p=f,w=s("2877"),h=s("6544"),m=s.n(h),g=s("8336"),b=s("b0af"),P=s("99d9"),y=s("12b2"),_=s("ce7e6"),S=s("0e8f"),x=s("4bd4"),k=s("a722"),O=s("2677"),A=Object(w["a"])(p,a,r,!1,null,"b7750dd8",null);e["default"]=A.exports;m()(A,{VBtn:g["a"],VCard:b["a"],VCardActions:P["a"],VCardText:P["b"],VCardTitle:y["a"],VDivider:_["a"],VFlex:S["a"],VForm:x["a"],VLayout:k["a"],VTextField:O["a"]})},"5f38":function(t,e,s){"use strict";var a=s("d91a"),r=s("bc3a");function n(){return r.get(Object(a["b"])("settings/general/email"))}function i(){return r.get(Object(a["b"])("settings/general"))}function o(t){return r.post(Object(a["b"])("settings/restore-password/start")+"?verificationKey="+t)}function c(t){return r.post(Object(a["b"])("settings/restore-password/finish"),t)}function l(t){return r.post(Object(a["b"])("settings/save-password"),t)}function d(t){var e="?";return e+="verificationKey="+t,r.post(Object(a["b"])("settings/save-email/start")+e)}function u(t){return r.post(Object(a["b"])("settings/save-email/finish"),t)}function v(t){var e="?";return e+="verificationKey="+t,r.post(Object(a["b"])("settings/save-phone/start")+e)}function f(t){return r.post(Object(a["b"])("settings/save-phone/finish"),t)}e["a"]={getEmailSettings:n,getGeneralSettings:i,restorePasswordStart:o,savePassword:l,saveEmailStart:d,saveEmailFinish:u,savePhoneStart:v,savePhoneFinish:f,restorePasswordFinish:c}},a57f:function(t,e,s){},dcdb:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"alert"}},[s("v-alert",{attrs:{dismissible:"",type:t._alertType},model:{value:t._alert,callback:function(e){t._alert=e},expression:"_alert"}},[t._v("\n    "+t._s(t.alertMessage)+"\n  ")])],1)},r=[],n=s("3284"),i=s("db49"),o=s("cc57"),c={name:"AlertMessage",mixins:[o["a"]],data:function(){return{options:{duration:300,offset:10,easing:"easeInOutCubic"}}},computed:{_alert:{get:function(){return-1!==this.types.indexOf(this.alertType)},set:function(t){this.clearAlert()}},_alertType:function(){return"alert-success"===this.alertType?"success":"error"}},props:{types:{type:Array,default:function(){return["alert-success","alert-danger"]}}},created:function(){n["b"].$on(i["k"].ALERT,this.alert)},beforeDestroy:function(){n["b"].$off(i["k"].ALERT)},methods:{alert:function(){var t=this;-1!==t.types.indexOf(t.alertType)&&t.$nextTick(function(){t.$vuetify.goTo("#alert",t.options)})}}},l=c,d=s("2877"),u=s("6544"),v=s.n(u),f=(s("a57f"),s("9d26")),p=s("b64a"),w=s("98a1"),h=s("00ab"),m=s("58df"),g=Object(m["a"])(p["a"],w["a"],h["a"]).extend({name:"v-alert",props:{dismissible:Boolean,icon:String,outline:Boolean,type:{type:String,validator:function(t){return["info","error","success","warning"].includes(t)}}},computed:{computedColor:function(){return this.type&&!this.color?this.type:this.color||"error"},computedIcon:function(){if(this.icon||!this.type)return this.icon;switch(this.type){case"info":return"$vuetify.icons.info";case"error":return"$vuetify.icons.error";case"success":return"$vuetify.icons.success";case"warning":return"$vuetify.icons.warning"}}},methods:{genIcon:function(){return this.computedIcon?this.$createElement(f["a"],{class:"v-alert__icon"},this.computedIcon):null},genDismissible:function(){var t=this;return this.dismissible?this.$createElement("a",{class:"v-alert__dismissible",on:{click:function(){t.isActive=!1}}},[this.$createElement(f["a"],{props:{right:!0}},"$vuetify.icons.cancel")]):null}},render:function(t){var e=[this.genIcon(),t("div",this.$slots.default),this.genDismissible()],s=this.outline?this.setTextColor:this.setBackgroundColor,a=t("div",s(this.computedColor,{staticClass:"v-alert",class:{"v-alert--outline":this.outline},directives:[{name:"show",value:this.isActive}],on:this.$listeners}),e);return this.transition?t("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[a]):a}}),b=Object(d["a"])(l,a,r,!1,null,"1e43e7c6",null);e["a"]=b.exports;v()(b,{VAlert:g})}}]);