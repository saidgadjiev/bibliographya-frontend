(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b5a16"],{"1a5e":function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("list",{attrs:{"infinite-load":e.infiniteLoad,"infinite-id":e.infiniteId,"reset-id":e.resetId},on:{"update:infiniteId":function(t){e.infiniteId=t},"update:infinite-id":function(t){e.infiniteId=t}},scopedSlots:e._u([{key:"item",fn:function(t){var i=t.item;return[l("user-card",e._b({attrs:{"all-roles":e.allRoles}},"user-card",i,!1,!0))]}}])},[l("template",{slot:"sidebar"},[l("side-bar",{attrs:{roles:e.allRoles},on:{input:e.applyRoleFilter}})],1),l("template",{slot:"smSidebar"},[l("side-card",{attrs:{roles:e.allRoles},on:{input:e.applyRoleFilter}})],1)],2)},a=[],r=l("75fc"),s=l("f3ce"),n=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("v-card",[l("v-card-title",{attrs:{"primary-title":""}},[l("h2",{staticClass:"font-weight-bold word-break-word"},[e._v(e._s(e._fullName))])]),l("v-card-text",{staticClass:"pt-0"},[l("div",{staticClass:"subheading font-weight-bold"},[e._v("\n      Идентификатор:\n      "),l("span",[e._v(e._s(e.id))])]),l("strong",[e._v("Роли:")]),e._l(e.roles,function(t,i){return l("v-chip",{key:i,attrs:{close:"",color:"indigo","text-color":"white"},on:{input:function(l){return e.deleteRole(t)}}},[e._v("\n      "+e._s(t)+"\n    ")])}),l("v-btn",{attrs:{icon:""},on:{click:e.addRole}},[l("v-icon",{attrs:{small:""}},[e._v("fas fa-plus")])],1),l("v-combobox",{attrs:{items:e.availableRoles,label:"Роли"},model:{value:e.selectedRole,callback:function(t){e.selectedRole=t},expression:"selectedRole"}})],2)],1)},o=[],d=(l("c5f6"),l("d91a")),c=l("bc3a"),u={getUsers:f,deleteRole:b,addRole:p};function f(e,t,l){return c.get(Object(d["b"])("users")+"?limit="+e+"&offset="+t+(l?"&"+l:""))}function b(e,t){return c.delete(Object(d["b"])("users/")+e+"/roles/"+t)}function p(e,t){return c.post(Object(d["b"])("users/"+e+"/roles/"+t))}var h={name:"UserCard",data:function(){return{selectedRole:"",availableRoles:[]}},props:{id:{type:Number,required:!0},allRoles:{type:Array,default:function(){return[]}},roles:{type:Array,default:function(){return[]}},biography:{type:Object,required:!0}},created:function(){this.filterRoles()},methods:{filterRoles:function(){var e=this;this.availableRoles=this.allRoles.filter(function(t){return-1===e.roles.indexOf(t)})},addRole:function(){var e=this;this.selectedRole&&""!==this.selectedRole&&u.addRole(this.id,this.selectedRole).then(function(){var t=Object(r["a"])(e.roles);t.push(e.selectedRole),e.availableRoles.splice(e.availableRoles.indexOf(e.selectedRole),1),e.selectedRole="",e.$emit("update:roles",t)})},deleteRole:function(e){var t=this;u.deleteRole(this.id,e).then(function(){var l=Object(r["a"])(t.roles);l.splice(l.indexOf(e),1),t.availableRoles.push(e),t.$emit("update:roles",l)})}},computed:{_fullName:function(){var e=this.biography.firstName,t=this.biography.lastName,l=this.biography.middleName,i=t+" "+e;return l?i+" "+l:i}}},v=h,R=l("2877"),m=l("6544"),_=l.n(m),y=l("8336"),g=l("b0af"),C=l("99d9"),O=l("12b2"),x=l("cc20"),j=l("2b5d"),w=l("132d"),V=Object(R["a"])(v,n,o,!1,null,"766dfbf8",null),I=V.exports;_()(V,{VBtn:y["a"],VCard:g["a"],VCardText:C["b"],VCardTitle:O["a"],VChip:x["a"],VCombobox:j["a"],VIcon:w["a"]});var S=l("bc3a"),$={getRoles:k,createRole:L,deleteRole:A};function k(){return S.get(Object(d["b"])("roles"))}function L(e){return S.post(Object(d["b"])("roles/"+e))}function A(e){return S.delete(Object(d["b"])("roles/"+e))}var N=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("aside",{staticClass:"sidebar"},[l("side-card",e._g(e._b({},"side-card",e.$attrs,!1),e.$listeners))],1)},U=[],E=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("v-card",[l("v-list",[l("v-list-tile",[l("v-list-tile-action",[l("v-combobox",e._g({staticClass:"ma-0 pa-0",attrs:{clearable:"","hide-details":"",items:e.roles,label:"Выберите роль"}},e.$listeners))],1)],1)],1)],1)},F=[],T={name:"SideCard",inheritAttrs:!1,props:{roles:{type:Array,default:function(){return[]}}}},B=T,Q=l("8860"),q=l("ba95"),D=l("40fe"),J=Object(R["a"])(B,E,F,!1,null,"507304c1",null),z=J.exports;_()(J,{VCard:g["a"],VCombobox:j["a"],VList:Q["a"],VListTile:q["a"],VListTileAction:D["a"]});var G={name:"SideBar",inheritAttrs:!1,components:{SideCard:z}},H=G,K=Object(R["a"])(H,N,U,!1,null,"35b174ad",null),M=K.exports,P=l("db49"),W={name:"UsersList",data:function(){return{loading:!0,allRoles:[],infiniteId:+new Date,resetId:+new Date,roleFilter:void 0}},metaInfo:{title:P["o"].USERS},components:{SideCard:z,SideBar:M,UserCard:I,List:s["a"]},methods:{applyRoleFilter:function(e){this.roleQuery=e?"roleQuery=role_name=="+e:void 0,++this.resetId},infiniteLoad:function(e,t){return u.getUsers(e,t,this.roleQuery)}},created:function(){var e=this;$.getRoles().then(function(t){var l;e.loading=!1,(l=e.allRoles).push.apply(l,Object(r["a"])(t.data))})}},X=W,Y=Object(R["a"])(X,i,a,!1,null,"20cdb45a",null);t["default"]=Y.exports}}]);