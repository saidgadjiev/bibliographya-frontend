(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bdf87"],{"2ded":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-stepper",{model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[a("v-stepper-header",[a("v-stepper-step",{attrs:{"complete-icon":"fas fa-check",complete:e.step>1,step:"1"}},[e.$vuetify.breakpoint.mdAndUp?a("span",[e._v("Новая почта")]):e._e()]),a("v-divider"),a("v-stepper-step",{attrs:{"complete-icon":"fas fa-check",complete:e.step>2,step:"2"}},[e.$vuetify.breakpoint.mdAndUp?a("span",[e._v("Подтверждение")]):e._e()])],1),a("v-stepper-items",[a("v-stepper-content",{attrs:{step:"1"}},[e._isRequest(e.Request.LOADING_SETTINGS)?a("v-layout",{attrs:{row:"","justify-center":"","align-center":""}},[a("progress-circular")],1):a("step-one",{attrs:{step:e.step,"current-email":e.currentEmail},on:{"update:step":function(t){e.step=t},"save-start":e.saveStart}})],1),a("v-stepper-content",{attrs:{step:"2"}},[a("confirm-code",{attrs:{code:e.saveEmailForm.code,request:e.Request.SAVE_EMAIL,label:"Код подтверждения отправлен вам на почту <strong>"+e.authKey+"</strong>.",confirm:e.saveEmailFinish,time:e.time,step:e.step},on:{"update:code":function(t){return e.$set(e.saveEmailForm,"code",t)}}})],1)],1)],1)},i=[],n=(a("06db"),a("cc57")),r=a("8022"),l=a("5f38"),c=a("c7da"),o=a("f75b"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-text",[e.currentEmail?a("span",[e._v("Ваша текущая почта "),a("strong",[e._v(e._s(e.currentEmail))]),e._v(".")]):e._e(),a("v-form",[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"mt-2",attrs:{"error-messages":e.errors.collect("email"),name:"email",label:"Электронная почта",type:"email","data-vv-name":"email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1)],1),a("v-card-actions",{staticStyle:{"justify-content":"center"}},[a("v-btn",{staticClass:"white--text",attrs:{color:"blue darken-3",loading:e._isRequest(e.Request.CHANGE_EMAIL),disabled:e._isRequest(e.Request.CHANGE_EMAIL)},on:{click:e.saveEmailStart}},[e._v("\n      Сохранить\n    ")])],1)],1)},m=[],p={name:"StepOneChangeEmail",mixins:[n["a"],r["a"]],data:function(){return{email:""}},props:{currentEmail:String},created:function(){this.$validator.localize("ru",{custom:{email:{required:function(){return"Введите почту"},email:function(){return"Введите корректную почту"}}}})},methods:{saveEmailStart:function(){var e=this,t=this;this.$validator.validate("email").then(function(a){a&&(t.setRequest(e.Request.CHANGE_EMAIL),l["a"].saveEmailStart(e.email).then(function(e){t.$emit("save-start",e.data),t.$emit("update:step",2)}).finally(function(){t.clearRequest()}))})}},watch:{email:function(e){this.clearAlert()}}},d=p,v=a("2877"),f=a("6544"),h=a.n(f),E=a("8336"),S=a("b0af"),_=a("99d9"),b=a("4bd4"),q=a("2677"),A=Object(v["a"])(d,u,m,!1,null,"fcfa3986",null),R=A.exports;h()(A,{VBtn:E["a"],VCard:S["a"],VCardActions:_["a"],VCardText:_["b"],VForm:b["a"],VTextField:q["a"]});var g=a("29c5"),y={name:"ChangeEmail",components:{ProgressCircular:g["a"],StepOne:R,ConfirmCode:o["a"]},mixins:[n["a"],r["a"]],data:function(){return{step:0,time:0,authKey:"",currentEmail:"",saveEmailForm:{code:""}}},created:function(){this.loadEmailSettings()},methods:{saveStart:function(e){this.authKey=e.authKey},loadEmailSettings:function(){var e=this;e.setRequest(e.Request.LOADING_SETTINGS),l["a"].getEmailSettings().then(function(t){e.currentEmail=t.data.email}).finally(function(){e.clearRequest()})},resetForm:function(){this.step=1,this.saveEmailForm.code=""},saveEmailFinish:function(){var e=this,t=this;t.setRequest(this.Request.SAVE_EMAIL),l["a"].saveEmailFinish(t.saveEmailForm).then(function(){t.$swal.fire({text:c["f"],type:"info",showCloseButton:!0}),t.$router.push("/settings")},function(a){a.response.status===e.HttpStatus.PRECONDITION_FAILED&&t.setAlertError(a)}).finally(function(){t.clearRequest()})}}},C=y,V=a("ce7e6"),x=a("a722"),I=a("7e85"),w=a("e516"),F=a("9c54"),k=a("56a4"),$=Object(v["a"])(C,s,i,!1,null,"11f4ea1e",null);t["default"]=$.exports;h()($,{VDivider:V["a"],VLayout:x["a"],VStepper:I["a"],VStepperContent:w["a"],VStepperHeader:F["a"],VStepperItems:F["b"],VStepperStep:k["a"]})}}]);