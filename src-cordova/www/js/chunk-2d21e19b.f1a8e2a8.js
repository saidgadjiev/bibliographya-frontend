(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21e19b"],{d3b8:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-stepper",{model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[n("v-stepper-header",[n("v-stepper-step",{attrs:{"complete-icon":"fas fa-check",complete:e.step>1,step:"1"}},[e.$vuetify.breakpoint.mdAndUp?n("span",[e._v("Новый телефон")]):e._e()]),n("v-divider"),n("v-stepper-step",{attrs:{"complete-icon":"fas fa-check",complete:e.step>2,step:"2"}},[e.$vuetify.breakpoint.mdAndUp?n("span",[e._v("Подтверждение")]):e._e()])],1),n("v-stepper-items",[n("v-stepper-content",{attrs:{step:"1"}},[e._isRequest(e.Request.LOADING_SETTINGS)?n("v-layout",{attrs:{row:"","justify-center":"","align-center":""}},[n("progress-circular")],1):n("step-one",{attrs:{step:e.step,"current-phone":e.currentPhone},on:{"update:step":function(t){e.step=t},"save-start":e.saveStart}})],1),n("v-stepper-content",{attrs:{step:"2"}},[n("confirm-code",{attrs:{code:e.savePhoneForm.code,request:e.Request.SAVE_PHONE,label:"Мы отправили вам на телефон <strong>"+e.authKey+"</strong> СМС с кодом подтверждения. Вся процедура бесплатна.",confirm:e.savePhoneFinish,time:e.time,step:e.step},on:{"update:code":function(t){return e.$set(e.savePhoneForm,"code",t)}}})],1)],1)],1)},s=[],r=(n("06db"),n("cc57")),o=n("8022"),i=n("5f38"),c=n("c7da"),p=n("f75b"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-text",[e.currentPhone?n("span",[e._v("Ваш текущий номер телефона "),n("strong",[e._v(e._s(e.currentPhone))]),e._v(".")]):e._e(),n("v-form",[n("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"mt-2",attrs:{"error-messages":e.errors.collect("phone"),name:"phone",label:"Номер телефона",placeholder:"+79030000007",type:"phone","data-vv-name":"phone"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1)],1),n("v-card-actions",{staticStyle:{"justify-content":"center"}},[n("v-btn",{staticClass:"white--text",attrs:{color:"blue darken-3",loading:e._isRequest(e.Request.CHANGE_PHONE),disabled:e._isRequest(e.Request.CHANGE_PHONE)},on:{click:e.savePhoneStart}},[e._v("\n      Сохранить\n    ")])],1)],1)},l=[],h={name:"StepOneChangeEmail",mixins:[r["a"],o["a"]],data:function(){return{blured:!1,phone:""}},props:{currentPhone:String},created:function(){this.$validator.localize("ru",{custom:{phone:{required:function(){return"Введите номер телефона"}}}})},methods:{savePhoneStart:function(){var e=this,t=this;this.$validator.validate("phone").then(function(n){n&&(t.setRequest(e.Request.CHANGE_PHONE),i["a"].savePhoneStart(e.phone).then(function(e){t.$emit("save-start",e.data),t.$emit("update:step",2)}).finally(function(){t.clearRequest()}))})}},watch:{phone:function(e){this.clearAlert()}}},d=h,v=n("2877"),f=n("6544"),m=n.n(f),S=n("8336"),_=n("b0af"),b=n("99d9"),P=n("4bd4"),E=n("2677"),q=Object(v["a"])(d,u,l,!1,null,"042d0b76",null),R=q.exports;m()(q,{VBtn:S["a"],VCard:_["a"],VCardActions:b["a"],VCardText:b["b"],VForm:P["a"],VTextField:E["a"]});var g=n("29c5"),y={name:"ChangeEmail",components:{ProgressCircular:g["a"],StepOne:R,ConfirmCode:p["a"]},mixins:[r["a"],o["a"]],data:function(){return{step:0,time:0,authKey:"",currentPhone:"",savePhoneForm:{code:""}}},created:function(){this.loadEmailSettings()},methods:{saveStart:function(e){this.authKey=e.authKey,this.time=e.timer.time},loadEmailSettings:function(){var e=this;e.setRequest(e.Request.LOADING_SETTINGS),i["a"].getEmailSettings().then(function(t){e.currentPhone=t.data.phone}).finally(function(){e.clearRequest()})},resetForm:function(){this.step=1,this.savePhoneForm.code=""},savePhoneFinish:function(){var e=this,t=this;t.setRequest(this.Request.SAVE_EMAIL),i["a"].savePhoneFinish(t.savePhoneForm).then(function(){t.$swal.fire({text:c["j"],type:"info",showCloseButton:!0}),t.$router.push("/settings")},function(n){n.response.status===e.HttpStatus.PRECONDITION_FAILED&&t.setAlertError(n)}).finally(function(){t.clearRequest()})}}},C=y,V=n("ce7e6"),A=n("a722"),N=n("7e85"),x=n("e516"),w=n("9c54"),F=n("56a4"),O=Object(v["a"])(C,a,s,!1,null,"112fdb9c",null);t["default"]=O.exports;m()(O,{VDivider:V["a"],VLayout:A["a"],VStepper:N["a"],VStepperContent:x["a"],VStepperHeader:w["a"],VStepperItems:w["b"],VStepperStep:F["a"]})}}]);