(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c76efa8"],{5772:function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("list",{attrs:{"infinite-load":t.infiniteLoad,"infinite-id":t.infiniteId,"reset-id":t.resetId},on:{"update:infiniteId":function(i){t.infiniteId=i},"update:infinite-id":function(i){t.infiniteId=i}},scopedSlots:t._u([{key:"item",fn:function(i){var a=i.item;return[e("biography-fix-card",t._b({attrs:{"biography-clamp":"","tree-clamp":"","tree-clamp-size":t._treeClampSize}},"biography-fix-card",a,!1,!0))]}}])},[e("template",{slot:"sidebar"},[e("side-bar",{on:{all:t.applyAllFilter,"not-assigned":t.applyNotAssignedFilter,"assigned-me":t.applyAssignedMeFilter,closed:t.applyClosedFilter,ignored:t.applyIgnoredFilter}})],1),e("template",{slot:"smSidebar"},[e("side-list",{on:{all:t.applyAllFilter,"not-assigned":t.applyNotAssignedFilter,"assigned-me":t.applyAssignedMeFilter,closed:t.applyClosedFilter,ignored:t.applyIgnoredFilter}})],1),e("template",{slot:"no-results"},[e("v-card",[e("v-card-text",[t._v("\n        Нет данных\n      ")])],1)],1)],2)},n=[],s=e("cebc"),r=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("aside",{staticClass:"sidebar"},[e("side-list",t._g({},t.$listeners))],1)},o=[],l=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-card",[e("v-list",{attrs:{dense:""}},[e("v-list-tile",{class:{active:1===t.clickedIndex},attrs:{href:""},on:{click:function(i){return t.click(1,"all")}}},[e("v-list-tile-content",[e("v-list-tile-title",[t._v("Все")])],1)],1),e("v-list-tile",{class:{active:2===t.clickedIndex},attrs:{href:""},on:{click:function(i){return t.click(2,"not-assigned")}}},[e("v-list-tile-content",[e("v-list-tile-title",[t._v("Не назначенные")])],1)],1)],1),e("v-divider",{staticClass:"grey lighten-2"}),e("v-list",{attrs:{dense:"",subheader:""}},[e("v-subheader",[t._v("Мои")]),e("v-list-tile",{class:{active:3===t.clickedIndex},attrs:{href:""},on:{click:function(i){return t.click(3,"assigned-me")}}},[e("v-list-tile-content",[e("v-list-tile-title",[t._v("Назначенные")])],1)],1),e("v-list-tile",{class:{active:4===t.clickedIndex},attrs:{href:""},on:{click:function(i){return t.click(4,"closed")}}},[e("v-list-tile-content",[e("v-list-tile-title",[t._v("Закрытые")])],1)],1),e("v-list-tile",{class:{active:5===t.clickedIndex},attrs:{href:""},on:{click:function(i){return t.click(5,"ignored")}}},[e("v-list-tile-content",[e("v-list-tile-title",[t._v("Закрытые без исправления")])],1)],1)],1)],1)},c=[],d={name:"SideList",data:function(){return{clickedIndex:1}},methods:{click:function(t,i){this.clickedIndex=t,this.$emit(i)}}},u=d,f=(e("cff0"),e("2877")),p=e("6544"),h=e.n(p),g=e("b0af"),b=e("ce7e6"),v=e("8860"),x=e("ba95"),m=e("5d23"),_=e("e0c7"),y=Object(f["a"])(u,l,c,!1,null,"7417edc5",null),I=y.exports;h()(y,{VCard:g["a"],VDivider:b["a"],VList:v["a"],VListTile:x["a"],VListTileContent:m["a"],VListTileTitle:m["b"],VSubheader:_["a"]});var k={name:"SideBar",components:{SideList:I}},F=k,$=Object(f["a"])(F,r,o,!1,null,"41567bec",null),C=$.exports,L=e("e835"),A=e("f3ce"),V=e("db49"),O=e("2f62"),S=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-card",[e("biography-fix-title",t._b({staticClass:"pb-0"},"biography-fix-title",t.$attrs,!1)),e("biography-card-title",t._b({},"biography-card-title",t.biography,!1,!0)),e("v-divider"),t._showBiography?e("biography-card-text",t._b({staticClass:"pb-1",attrs:{"biography-clamp":t.$attrs["biography-clamp"],"tree-clamp":t.$attrs["tree-clamp"],"tree-clamp-size":t.$attrs["tree-clamp-size"]}},"biography-card-text",t.biography,!1)):t._e(),e("v-divider"),e("biography-card-actions",t._b({},"biography-card-actions",t.biography,!1,!0)),e("biography-fix-actions",t._g(t._b({},"biography-fix-actions",t.$attrs,!1),t.$listeners))],1)},B=[],N=e("a518"),w=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-card-text",[e("div",[t.fixer?e("div",[e("span",[t._v("\n        Исполнитель:\n        "),e("router-link",{staticClass:"bib-a",attrs:{to:t._fixerAccountLink}},[t._v(t._s(t._fixerFio))])],1)]):t._e(),e("div",[t._v("\n      Статус:\n      "),e("strong",[t._v(t._s(t._fixStatus))])]),t.info?e("div",[t._v("\n      Комментарий:\n      "),e("strong",[t._v(t._s(t.info))])]):t._e(),e("div",[e("span",[t._v("\n        Предложил:\n        "),e("router-link",{staticClass:"bib-a",attrs:{to:t._creatorAccountLink}},[t._v(t._s(t._creatorFio))])],1)]),t.fixText?e("div",[e("span",{staticClass:"subheading font-weight-bold",staticStyle:{color:"red"}},[t._v("\n        Исправление:\n      ")]),t._v("\n      "+t._s(t.fixText)+"\n    ")]):t._e()])])},T=[],j=(e("c5f6"),{name:"BiographyFixTitle",props:{status:{type:Number},fixer:{type:Object},creator:{type:Object},fixText:{type:String},info:{type:String}},computed:{_fixStatus:function(){switch(this.status){case V["g"].IGNORED:return"Закрыто без исправления";case V["g"].PENDING:return"В обработке";case V["g"].CLOSED:return"Закрыто"}return null},_fixerFio:function(){return this.fixer.lastName+" "+this.fixer.firstName},_creatorFio:function(){return this.creator.lastName+" "+this.creator.firstName},_fixerAccountLink:function(){return"/profile/"+this.fixer.userId},_creatorAccountLink:function(){return"/profile/"+this.creator.userId}}}),E=j,D=e("99d9"),M=Object(f["a"])(E,w,T,!1,null,"153a04d1",null),z=M.exports;h()(M,{VCardText:D["b"]});var G=e("d717"),R=e("4441"),U=function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.actions.length>0?e("v-card-actions",[e("v-layout",{attrs:{row:"",wrap:""}},t._l(t.actions,function(i,a){return e("v-flex",{key:a,attrs:{xs12:""}},[e("fix-button",t._g(t._b({attrs:{action:i}},"fix-button",t.$attrs,!1,!0),t.$listeners))],1)}),1)],1):t._e()},q=[],J=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("v-btn",{attrs:{block:"",color:"primary",loading:t.loading,disabled:t.loading},on:{click:t.doAction}},[t._v(t._s(t.action.caption)+"\n  ")]),e("textarea-dialog",{attrs:{ok:t.okFunction,placeholder:"Комментарий",visible:t.dialogVisible,"ok-caption":"Ок","required-text":"Введите комментарий"},on:{"update:visible":function(i){t.dialogVisible=i}}})],1)},P=[],H=(e("7f7f"),e("0a2a")),K={name:"FixButton",components:{TextareaDialog:H["a"]},data:function(){return{dialogVisible:!1,okFunction:function(){},loading:!1}},props:{id:{type:Number},fixer:{type:Object},action:{type:Object,required:!0},status:{type:Number}},methods:{doAction:function(){switch(this.action.name){case V["f"].ASSIGN_ME:this.assignMe();break;case V["f"].IGNORE:this.okFunction=this.ignore,this.dialogVisible=!0;break;default:this.complete();break}},updateFixerInfo:function(t){this.$emit("update:actions",t.actions),this.$emit("update:fixer",t.fixer),this.$emit("update:fixerId",t.fixer.userId)},assignMe:function(){var t=this;t.loading=!0,L["a"].assignMe(this.id,{signal:this.action.signal,status:this.status}).then(function(i){t.updateFixerInfo(i.data),t.loading=!1},function(i){if(409===i.response.status){t.updateFixerInfo(i.response.data);var e=t.fixer,a="<a href=\"'/profile/"+e.userId+'">'+e.firstName+" "+e.lastName+"</a>,&nbsp;уже взял исправление на себя.";t.$swal.fire({html:a,type:"error",showCloseButton:!0})}t.loading=!1})},ignore:function(t){var i=this;i.dialogVisible=!1,i.loading=!0,L["a"].complete(this.id,{signal:this.action.signal,status:this.status,info:t}).then(function(t){i.$emit("update:actions",t.data.actions),i.$emit("update:info",t.data.info),i.$emit("update:status",t.data.status),i.loading=!1},function(t){i.loading=!1})},complete:function(){var t=this;t.loading=!0,L["a"].complete(this.id,{signal:this.action.signal,status:this.status}).then(function(i){t.$emit("update:status",i.data.status),t.$emit("update:actions",i.data.actions),t.$emit("update:fixerId",i.data.fixerId),t.$emit("update:fixer",i.data.fixer),t.loading=!1},function(i){t.loading=!1})}}},Q=K,W=e("8336"),X=Object(f["a"])(Q,J,P,!1,null,"74e118f0",null),Y=X.exports;h()(X,{VBtn:W["a"]});var Z={name:"BiographyFixActions",inheritAttrs:!1,components:{FixButton:Y},props:{actions:Array,default:function(){return[]}}},tt=Z,it=e("0e8f"),et=e("a722"),at=Object(f["a"])(tt,U,q,!1,null,"75399fbe",null),nt=at.exports;h()(at,{VCardActions:D["a"],VFlex:it["a"],VLayout:et["a"]});var st={name:"BiographyFixCard",components:{BiographyCardText:R["a"],BiographyCardTitle:G["a"],BiographyFixTitle:z,BiographyFixActions:nt,BiographyCardActions:N["a"]},props:{biography:Object},computed:{_showBiography:function(){return!!this.biography.bio}}},rt=st,ot=Object(f["a"])(rt,S,B,!1,null,"4200d268",null),lt=ot.exports;h()(ot,{VCard:g["a"],VDivider:b["a"]});var ct=e("2c57"),dt={name:"BiographiesFixesList",mixins:[ct["a"]],data:function(){return{filter:void 0,resetId:+new Date,infiniteId:+new Date}},computed:Object(s["a"])({},Object(O["c"])(["getUserId"]),{_treeClampSize:function(){return V["q"]}}),methods:{pullToRefresh:function(t){t("done"),this.resetList()},resetList:function(){++this.resetId},applyIgnoredFilter:function(){this.filter="fixerId=="+this.getUserId+";status=="+V["g"].IGNORED,this.resetList()},applyClosedFilter:function(){this.filter="fixerId=="+this.getUserId+";status=="+V["g"].CLOSED,this.resetList()},applyNotAssignedFilter:function(){this.filter="fixerId==null",this.resetList()},applyAllFilter:function(){this.filter=void 0,this.resetList()},applyAssignedMeFilter:function(){this.filter="fixerId=="+this.getUserId,this.resetList()},infiniteLoad:function(t,i){return L["a"].getFixes(t,i,V["b"],this.filter)}},components:{BiographyFixCard:lt,SideList:I,List:A["a"],SideBar:C}},ut=dt,ft=Object(f["a"])(ut,a,n,!1,null,"170860d1",null);i["default"]=ft.exports;h()(ft,{VCard:g["a"],VCardText:D["b"]})},cff0:function(t,i,e){"use strict";var a=e("ffd1"),n=e.n(a);n.a},ffd1:function(t,i,e){}}]);